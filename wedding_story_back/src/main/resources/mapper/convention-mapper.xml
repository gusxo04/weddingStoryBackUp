<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="kr.co.iei.convention.model.dao.ConventionDao">

    <select id="getTime" resultType="convention">
        select * from 
            (select rownum as rnum, c1.* from 
                (select * from convention order by 1 desc)c1) 
        where rnum = 1
    </select>
    <!-- 1 or 4 -->

    <select id="selectConventionSeat" resultType="conventionSeat">
        select * from convention_seat where
        seat_code like 
        <choose>
            <when test="i == 0">
                'A%'
            </when>
            <when test="i == 1">
                'B%'
            </when>
            <when test="i == 2">
                'C%'
            </when>
        </choose>
        order by 1
    </select>

    <insert id="insertConvention">
        insert into convention values(convention_seq.nextval,#{conventionTitle},#{conventionContent},#{conventionImg},#{conventionStart},#{conventionEnd},#{conventionTime},sysdate,#{conventionPrice},#{conventionLimit},#{imgStyle})
    </insert>

</mapper>
